(this["webpackJsonpabc-analyzer"]=this["webpackJsonpabc-analyzer"]||[]).push([[0],{100:function(e,t){},102:function(e,t){},133:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),i=n(16),o=n.n(i),a=n(11),u=n(32),l=n(45),s=n(42),d=n.n(s),f=n(29),j=n(60),b=n(33),v=n(19),m=n.n(v),h=n(61);function O(e){var t={};for(var n in e)if(e.hasOwnProperty(n))if("object"==typeof e[n]&&null!==e[n]){var c=O(e[n]);for(var r in c)c.hasOwnProperty(r)&&(t[n+"_"+r]=c[r])}else t[n]=e[n];return t}var p=function(e){return e.map((function(e,t){var n,c=e[0],r=e[1],i=e[5],o=null===(n=e[8])||void 0===n?void 0:n.replaceAll('""','"').replaceAll(': ", ',': "", ');try{return Object(b.a)({timestamp:i,_id:c,datumType:r},O(JSON.parse(o)))}catch(a){return console.log(a),{timestamp:i,_id:c,datumType:r}}}))};var x,g,y,w=function(e){var t=Object(c.useState)([]),n=Object(a.a)(t,2),r=n[0],i=n[1],o=Object(c.useMemo)((function(){return r.reduce((function(e,t){var n=Object.keys(t);return m.a.union(e,n)}),[])}),[r]);return Object(c.useEffect)((function(){function t(){return(t=Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(h.a)("http://localhost:3000/logs/"+e,{worker:!0,complete:function(e){console.log(e);var t=e.data,n=p(t),c=n.reduce((function(e,t){var n=Object.keys(t);return m.a.union(e,n)}),[]).reduce((function(e,t){return Object(b.a)(Object(b.a)({},e),{},Object(f.a)({},t,"empty"))}),{}),r=n.map((function(e){return Object.assign({},c,e)}));i(r)},download:!0});case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),{logData:r,logColumns:o}},S=n(34),k=n(136),C=n(5);var N=S.a.div(x||(x=Object(u.a)(["\n  width: 100%;\n  height: 60%;\n  margin: 1rem;\n  .cell {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    :hover {\n      overflow: visible;\n      white-space: normal;\n    }\n  }\n"]))),T=S.a.div(g||(g=Object(u.a)(["\n  ","\n  ","\n"])),(function(e){return e.passed&&"\n    background: yellow;\n  "}),(function(e){return e.selected&&"\n    background: red;\n  "})),I=S.a.div(y||(y=Object(u.a)(["\n  ","\n"])),(function(e){return e.selected&&"\n    background: skyblue;\n  "})),R=function(e){var t=e.fileName,n=e.sec,r=e.sync,i=e.start,o=(e.setSync,e.setSelectedTimestamp),u=(e.selectedTimestamp,e.playerRef),s=w(t),d=s.logData,f=s.logColumns,j=Object(c.useState)(),b=Object(a.a)(j,2),v=b[0],h=b[1],O=Object(c.useState)([]),p=Object(a.a)(O,2),x=p[0],g=p[1],y=Object(c.useState)([]),S=Object(a.a)(y,2),R=S[0],B=S[1];Object(c.useEffect)((function(){g(new Array(f.length).fill(!0)),B(new Array(d.length).fill(!0))}),[d.length,f.length]),Object(c.useEffect)((function(){var e=f.filter((function(e,t){return x[t]}));h(d.map((function(t){return m.a.pick(t,e)})).filter((function(e,t){return R[t]})).sort((function(e,t){return parseInt(e.timestamp)-parseInt(t.timestamp)})))}),[d,f,x,R]);var A=Object(c.useState)(""),E=Object(a.a)(A,2),P=E[0],_=E[1],F=Object(c.useCallback)((function(e){_(null===e||void 0===e?void 0:e._id);var t=parseInt(null===e||void 0===e?void 0:e.timestamp);o(t),u.current.seekTo((i+t-r)/1e3,"seconds")}),[u,o,i,r]),M=Object(c.useState)(""),D=Object(a.a)(M,2),J=D[0],L=D[1],z=Object(c.useState)([]),W=Object(a.a)(z,2),G=W[0],H=W[1];Object(c.useEffect)((function(){var e,t,n=f.map((function(e){return{col:e,count:Object.entries(m.a.countBy(null===d||void 0===d?void 0:d.map((function(t){return t[e]}))))}})),c=null===(e=f.map((function(e){return{col:e,count:Object.entries(m.a.countBy(null===v||void 0===v?void 0:v.map((function(t){return t[e]}))))}})).find((function(e){return e.col===J})))||void 0===e?void 0:e.count,r=null===(t=n.find((function(e){return e.col===J})))||void 0===t?void 0:t.count;H(null===r||void 0===r?void 0:r.map((function(e){if(null===c||void 0===c?void 0:c.map((function(e){return e[0]})).includes(e[0])){var t=c.find((function(t){return t[0]===e[0]}));if(void 0===t)throw new Error("no lookup");var n=t[1];return n===e[1]?[e[0],n,!0,e[1]]:[e[0],n,!1,e[1]]}return[e[0],0,!1,e[1]]})))}),[J,d,v,f]);var q=Object(c.useCallback)((function(e){L(e)}),[]),K=function(e){var t=e.columnIndex,c=e.key,o=e.rowIndex,a=e.style;if(v){var u=f.filter((function(e,t){return x[t]}))[t],l=v[o];return 0===o?Object(C.jsx)(I,{style:a,className:"cell",onClick:function(){return q(u)},selected:J===u,children:u},c):Object(C.jsx)(T,{style:a,className:"cell",passed:n+r-i>=parseInt(null===l||void 0===l?void 0:l.timestamp),selected:(null===l||void 0===l?void 0:l._id)===P,onClick:function(){return F(l)},children:l&&l[u]&&l[u].toString()},c)}},Q=Object(c.useCallback)((function(e,t){B(t?function(t){return t.map((function(t,n){return!0===t?d[n][J]!==e:t}))}:function(t){return t.map((function(t,n){return!1===t?d[n][J]===e:t}))})}),[J,d]),U=Object(c.useCallback)((function(e){!e.target.checked||e.target.indeterminate?g((function(e){return e.map((function(){return!1}))})):g((function(e){return e.map((function(){return!0}))}))}),[]),V=Object(c.useCallback)((function(e){!e.target.checked||e.target.indeterminate?B((function(e){return e.map((function(){return!1}))})):B((function(e){return e.map((function(){return!0}))}))}),[]);return Object(C.jsxs)("div",{className:"w-full h-screen",children:[Object(C.jsx)(N,{children:Object(C.jsx)(l.a,{children:function(e){var t=e.height,n=e.width;return Object(C.jsx)(l.b,{height:t,rowHeight:30,width:n,fixedColumnCount:1,fixedRowCount:1,cellRenderer:K,style:{border:"1px solid #ddd"},styleTopLeftGrid:{borderBottom:"2px solid #aaa",borderRight:"2px solid #aaa",fontWeight:"bold"},rowCount:R.filter(Boolean).length,columnCount:x.filter(Boolean).length,columnWidth:150})}})}),Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsxs)("div",{className:"flex flex-col ml-4",children:[Object(C.jsx)("div",{className:"text-lg font-bold",children:"Show Columns"}),Object(C.jsx)(k.a,{checked:x.every((function(e){return!0===e})),indeterminate:!x.every((function(e){return!0===e}))&&x.some((function(e){return!0===e})),onChange:U,children:"Select All"}),Object(C.jsx)("div",{className:"h-1/5 overflow-auto",children:f.map((function(e,t){return Object(C.jsx)("div",{children:Object(C.jsx)(k.a,{onChange:function(){return function(e){g((function(t){return t.map((function(t,n){return e===n?!t:t}))}))}(t)},checked:x[t],children:e},t)})}))})]}),""!==J&&Object(C.jsxs)("div",{className:"flex flex-col ml-4",children:[Object(C.jsxs)("div",{className:"text-lg font-bold",children:["Column Filter - ",J]}),Object(C.jsx)(k.a,{checked:null===G||void 0===G?void 0:G.map((function(e){return e[2]})).every((function(e){return!0===e})),indeterminate:!(null===G||void 0===G?void 0:G.map((function(e){return e[2]})).every((function(e){return!0===e})))&&(null===G||void 0===G?void 0:G.map((function(e){return e[2]})).some((function(e){return!0===e}))),onChange:V,children:"Select All"}),Object(C.jsx)("div",{className:"h-1/5 overflow-auto",children:null===G||void 0===G?void 0:G.sort((function(e,t){return t[3]-e[3]})).map((function(e){return Object(C.jsx)("div",{children:Object(C.jsxs)(k.a,{checked:e[2],indeterminate:0!==e[1]&&!e[2],onClick:function(){return Q(e[0],e[2])},children:[e[0]," (",e[1],"/",e[3],")"]},e[0])})}))})]})]})]})},B=(n(114),n(76)),A=n.n(B);var E=function(e){var t=e.url,n=e.setSec,r=e.setSync,i=e.setStart,o=e.selectedTimestamp,u=e.playerRef,l=Object(c.useState)(0),s=Object(a.a)(l,2),d=s[0],f=s[1];return Object(c.useCallback)((function(){r(o),i(d)}),[d,o,i,r]),Object(C.jsx)("div",{className:"h-screen w-full p-4",children:Object(C.jsx)(A.a,{url:t,controls:!0,width:"100%",height:"100%",onProgress:function(e){n(Math.floor(1e3*e.playedSeconds)),f(Math.floor(1e3*e.playedSeconds))},progressInterval:10,ref:u})})};var P=function(){var e=Object(c.useState)(1629813828796),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(0),o=Object(a.a)(i,2),u=o[0],l=o[1],s=Object(c.useState)(6835),d=Object(a.a)(s,2),f=d[0],j=d[1],b=Object(c.useState)(0),v=Object(a.a)(b,2),m=v[0],h=v[1],O=Object(c.useRef)();return Object(C.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[Object(C.jsx)("div",{className:"w-2/3 h-screen",children:Object(C.jsx)(R,{fileName:"20.4.csv",sec:u,sync:n,setSelectedTimestamp:h,playerRef:O,setSync:r,selectedTimestamp:m,start:f})}),Object(C.jsx)("div",{className:"w-1/3 h-screen",children:Object(C.jsx)(E,{url:"videos/P020_10.webm",setSec:l,setSync:r,setStart:j,selectedTimestamp:m,playerRef:O})})]})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),i(e),o(e)}))};n(133);o.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(P,{})}),document.getElementById("root")),_()}},[[134,1,2]]]);
//# sourceMappingURL=main.492295f4.chunk.js.map