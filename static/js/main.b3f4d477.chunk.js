(this["webpackJsonpabc-analyzer"]=this["webpackJsonpabc-analyzer"]||[]).push([[0],{237:function(e,t){},239:function(e,t){},274:function(e,t){},398:function(e,t,n){},399:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),l=n(26),r=n.n(l),i=n(21),o=n(109),u=n(139),s=n(133),d=n.n(s),f=n(187),j=n.n(f),m=n(134),v=n.n(m),b=n(66),p=n(188),O=n(110),h=n(54),y=n.n(h),k=n(189);function x(e){var t={};for(var n in e)if(e.hasOwnProperty(n))if("object"==typeof e[n]&&null!==e[n]){var c=x(e[n]);for(var a in c)c.hasOwnProperty(a)&&(t[n+"_"+a]=c[a])}else t[n]=String(e[n]);return t}var g=function(e){return e.map((function(e,t){var n,c=e[0],a=e[1],l=e[5],r=null===(n=e[8])||void 0===n?void 0:n.replaceAll('""','"').replaceAll(': ", ',': "", ');try{return Object(O.a)({timestamp:l,_id:c,datumType:a},x(JSON.parse(r)))}catch(i){return console.log(i),{timestamp:l,_id:c,datumType:a}}}))};var S=function(e){var t=Object(c.useState)([]),n=Object(i.a)(t,2),a=n[0],l=n[1],r=Object(c.useMemo)((function(){return a.reduce((function(e,t){var n=Object.keys(t);return y.a.union(e,n)}),[])}),[a]);return Object(c.useEffect)((function(){function t(){return(t=Object(p.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(k.a)("".concat("https://wooogler.github.io/abc-analyzer","/logs/").concat(e),{worker:!0,complete:function(e){var t=["timestamp","datumType","type","name","packageName","currentKey","timeTaken","isPosted","messageBox","presentation","_id"],n=e.data,c=g(n).map((function(e){return y.a.pick(e,t)})),a=t.reduce((function(e,t){return Object(O.a)(Object(O.a)({},e),{},Object(b.a)({},t,"empty"))}),{}),r=c.map((function(e){return Object.assign({},a,e)}));l(r)},download:!0});case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),{logData:a,logColumns:r}},w=n(113),C=n(405),N=n(402),T=n(404),E=n(77),I=n(401),L=n(7),A=["APP_USAGE_EVENT","KEY_LOG","NOTIFICATION","MESSAGE","CALL_LOG","MEDIA"],_=[{title:"APP_USAGE_EVENT",key:"APP_USAGE_EVENT",selectable:!1,children:[{title:"name",key:"app-name"},{title:"packageName",key:"app-packageName"},{title:"type",key:"app-type"}]},{title:"KEY_LOG",key:"KEY_LOG",selectable:!1,children:[{title:"name",key:"key-name"},{title:"packageName",key:"key-packageName"},{title:"currentKey",key:"key-currentKey"},{title:"timeTaken",key:"key-timeTaken"}]},{title:"NOTIFICATION",key:"NOTIFICATION",selectable:!1,children:[{title:"name",key:"noti-name"},{title:"packageName",key:"noti-packageName"},{title:"isPosted",key:"noti-isPosted"}]},{title:"MESSAGE",key:"MESSAGE",selectable:!1,children:[{title:"messageBox",key:"msg-messageBox"}]},{title:"CALL_LOG",key:"CALL_LOG",selectable:!1,children:[{title:"type",key:"call-type"},{title:"presentation",key:"call-presentation"}]},{title:"MEDIA",key:"MEDIA",selectable:!1}];var M=function(e){var t=e.originalLogColumns,n=e.setShowColumnIndex,a=e.setShowRowIndex,l=e.setCol,r=e.setDatumTypes,i=e.logData,o=Object(c.useCallback)((function(e,c){var l=[].concat(Object(E.a)(e),Object(E.a)(c.halfCheckedKeys)),o=["timestamp","_id","datumType"].concat(Object(E.a)(y.a.uniq(l.filter((function(e){return e.includes("-")})).map((function(e){return e.split("-")[1]})))));a(i.map((function(e){return l.includes(e.datumType)}))),n(t.map((function(e){return o.includes(e)}))),r(l.filter((function(e){return A.includes(e)})))}),[i,t,r,n,a]),u=Object(c.useCallback)((function(e){l(e[0].split("-")[1])}),[l]);return Object(L.jsx)("div",{className:"h-60 overflow-auto",children:Object(L.jsx)(I.a,{checkable:!0,treeData:_,onCheck:o,onSelect:u,defaultExpandedKeys:["all"]})})},P=n(218),D=n(215);var G,R,B,F=function(e){var t=e.timestamp,n=Object(c.useState)(0),a=Object(i.a)(n,2),l=a[0],r=a[1],o=Object(c.useState)([[{value:"Phone receive"},{value:null}],[{value:"SMS reply (\uc7a5\uc18c)"},{value:null}],[{value:"SMS reply (\uc2dc\uac04)"},{value:null}],[{value:"SMS reply (\uc694\uc77c)"},{value:null}],[{value:"SMS reply (\ud0c0\uc774\ud551)"},{value:null}],[{value:"Camera (\uc21c\uc11c)"},{value:null}],[{value:"Camera (\uc0ad\uc81c)"},{value:null}],[{value:"Location (\uc7a5\uc18c \uacbd\ub85c \ub9c1\ud06c)"},{value:null}],[{value:"Location (\ud3c9\uc810)"},{value:null}],[{value:"Location (\ubb38\uc790 \ubc1b\ub294 \uc0ac\ub78c)"},{value:null}],[{value:"Location (\uc1a1\uae08\uc561)"},{value:null}]]),u=Object(i.a)(o,2),s=u[0],d=u[1];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:"flex",children:[Object(L.jsx)("div",{className:"text-lg font-bold",children:"Task Sheet"}),Object(L.jsx)(P.a,{className:"ml-auto",onClick:function(){d((function(e){return null===e||void 0===e?void 0:e.map((function(e,n){return n===l?[e[0],{value:t}]:e}))}))},children:"Copy Timestamp"})]}),Object(L.jsx)("div",{className:"h-60 overflow-auto",children:Object(L.jsx)(D.a,{data:s,onSelect:function(e){e!==[]&&e[0]&&(console.log(e),r(e[0].row))}})})]})};d.a.extend(j.a);var K=w.a.div(G||(G=Object(o.a)(["\n  width: 100%;\n  height: 60%;\n  margin: 1rem;\n  .cell {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n"]))),z=w.a.div(R||(R=Object(o.a)(["\n  ","\n  ","\n"])),(function(e){return e.passed&&"\n    background: yellow;\n  "}),(function(e){return e.selected&&"\n    background: red;\n  "})),J=w.a.div(B||(B=Object(o.a)([""]))),U=function(e){var t=e.fileName,n=e.sec,a=e.sync,l=e.start,r=(e.setSync,e.setSelectedTimestamp),o=e.selectedTimestamp,s=e.playerRef,f=S(t),j=f.logData,m=f.logColumns,v=Object(c.useState)(),b=Object(i.a)(v,2),p=b[0],O=b[1],h=Object(c.useState)([]),k=Object(i.a)(h,2),x=k[0],g=k[1],w=Object(c.useState)([]),E=Object(i.a)(w,2),I=E[0],A=E[1];Object(c.useEffect)((function(){var e=new Array(m.length).fill(!0);g(e),A(new Array(j.length).fill(!1))}),[j.length,m.length]),Object(c.useEffect)((function(){var e=m.filter((function(e,t){return x[t]}));O(j.map((function(t){return y.a.pick(t,e)})).filter((function(e,t){return I[t]})).sort((function(e,t){return parseInt(e.timestamp)-parseInt(t.timestamp)})))}),[j,m,x,I]);var _=Object(c.useState)(""),P=Object(i.a)(_,2),D=P[0],G=P[1],R=Object(c.useCallback)((function(e){G(null===e||void 0===e?void 0:e._id);var t=parseInt(null===e||void 0===e?void 0:e.timestamp);r(t),s&&s.current.seekTo((l+t-a)/1e3,"seconds")}),[s,r,l,a]),B=Object(c.useState)(""),U=Object(i.a)(B,2),V=U[0],Y=U[1],W=Object(c.useState)([]),q=Object(i.a)(W,2),H=q[0],Q=q[1],X=Object(c.useState)([]),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1];Object(c.useEffect)((function(){var e,t;console.log(H);var n=j.filter((function(e){return H.includes(e.datumType)})),c=m.map((function(e){return{col:e,count:Object.entries(y.a.countBy(null===n||void 0===n?void 0:n.map((function(t){return t[e]}))))}})),a=null===(e=m.map((function(e){return{col:e,count:Object.entries(y.a.countBy(null===n||void 0===n?void 0:n.map((function(t){return t[e]}))))}})).find((function(e){return e.col===V})))||void 0===e?void 0:e.count,l=null===(t=c.find((function(e){return e.col===V})))||void 0===t?void 0:t.count;ee(null===l||void 0===l?void 0:l.map((function(e){if(null===a||void 0===a?void 0:a.map((function(e){return e[0]})).includes(e[0])){var t=a.find((function(t){return t[0]===e[0]}));if(void 0===t)throw new Error("no lookup");var n=t[1];return n===e[1]?{value:e[0],count:n,checked:!0,total:e[1]}:{value:e[0],count:n,checked:!1,total:e[1]}}return{value:e[0],count:0,checked:!1,total:e[1]}})))}),[V,H,j,p,m]);var te=function(e){var t=e.columnIndex,c=e.key,r=e.rowIndex,i=e.style;if(p){var o=m.filter((function(e,t){return x[t]}))[t],u=p[r];if(0===r)return Object(L.jsx)(J,{style:i,className:"cell",children:o},c);var s=0!==t?u&&u[o]&&u[o].toString():u&&d()(parseInt(u[o])).format("MM/DD hh:mm:ss.SSS");return Object(L.jsx)(z,{style:i,className:"cell",passed:n+a-l>=parseInt(null===u||void 0===u?void 0:u.timestamp),selected:(null===u||void 0===u?void 0:u._id)===D,onClick:function(){return R(u)},children:Object(L.jsx)(C.a,{title:s,children:s})},c)}},ne=Object(c.useState)(0),ce=Object(i.a)(ne,2),ae=ce[0],le=ce[1];Object(c.useEffect)((function(){var e=p?p.findIndex((function(e){return n+a-l<=parseInt(null===e||void 0===e?void 0:e.timestamp)})):0;le(e+5)}),[p,n,l,a]);var re=Object(c.useCallback)((function(e,t){A(t?function(t){return t.map((function(t,n){return!0===t?j[n][V]!==e:t}))}:function(t){return t.map((function(t,n){return!1===t?j[n][V]===e:t}))})}),[V,j]),ie=Object(c.useCallback)((function(e){!e.target.checked||e.target.indeterminate?A((function(e){return e.map((function(){return!1}))})):A((function(e){return e.map((function(){return!0}))}))}),[]),oe=Object(c.useState)([]),ue=Object(i.a)(oe,2),se=ue[0],de=ue[1];Object(c.useEffect)((function(){de($)}),[$,m]);var fe=Object(c.useCallback)((function(e){de(null===$||void 0===$?void 0:$.filter((function(t){return t.value.toLowerCase().includes(e.target.value.toLowerCase())})))}),[$]);return Object(L.jsxs)("div",{className:"w-full h-screen",children:[Object(L.jsx)(K,{children:Object(L.jsx)(u.a,{children:function(e){var t=e.height,n=e.width;return Object(L.jsx)(u.b,{height:t,rowHeight:30,width:n,fixedColumnCount:1,fixedRowCount:1,cellRenderer:te,style:{border:"1px solid #ddd"},styleTopLeftGrid:{borderBottom:"2px solid #aaa",borderRight:"2px solid #aaa",fontWeight:"bold"},rowCount:I.filter(Boolean).length,columnCount:x.filter(Boolean).length,columnWidth:200,scrollToRow:ae})}})}),Object(L.jsxs)("div",{className:"flex",children:[Object(L.jsxs)("div",{className:"flex flex-col ml-4",children:[Object(L.jsx)("div",{className:"text-lg font-bold",children:"Show Columns"}),Object(L.jsx)(M,{originalLogColumns:m,setShowColumnIndex:g,setCol:Y,logData:j,setDatumTypes:Q,setShowRowIndex:A})]}),(""!==V||0===(null===se||void 0===se?void 0:se.length))&&Object(L.jsxs)("div",{className:"flex flex-col ml-4",children:[Object(L.jsxs)("div",{className:"text-lg font-bold",children:["Column Filter - ",V]}),Object(L.jsx)(N.a,{size:"small",onChange:fe}),Object(L.jsx)("div",{className:"p-1",children:Object(L.jsx)(T.a,{checked:null===$||void 0===$?void 0:$.map((function(e){return e.checked})).every((function(e){return!0===e})),indeterminate:!(null===$||void 0===$?void 0:$.map((function(e){return e.checked})).every((function(e){return!0===e})))&&(null===$||void 0===$?void 0:$.map((function(e){return e.checked})).some((function(e){return!0===e}))),onChange:ie,children:"Select All"})}),Object(L.jsx)("div",{className:"h-60 overflow-auto",children:null===se||void 0===se?void 0:se.sort((function(e,t){return t.total-e.total})).map((function(e){return Object(L.jsx)("div",{className:"p-1",children:Object(L.jsxs)(T.a,{checked:e.checked,indeterminate:0!==e.count&&!e.checked,onClick:function(){return re(e.value,e.checked)},children:[e.value," (",e.count,"/",e.total,")"]},e.value)})}))})]}),Object(L.jsx)("div",{className:"ml-auto",children:Object(L.jsx)(F,{timestamp:o.toString()})})]})]})},V=(n(379),n(213)),Y=n.n(V);var W=function(e){var t=e.url,n=e.setSec,a=e.setSync,l=e.setStart,r=e.selectedTimestamp,o=e.playerRef,u=Object(c.useState)(0),s=Object(i.a)(u,2),d=s[0],f=s[1];return Object(c.useCallback)((function(){a(r),l(d)}),[d,r,l,a]),Object(L.jsx)("div",{className:"h-screen w-full p-4",children:Object(L.jsx)(Y.a,{url:t,controls:!0,width:"100%",height:"100%",onProgress:function(e){n(Math.floor(1e3*e.playedSeconds)),f(Math.floor(1e3*e.playedSeconds))},progressInterval:10,ref:o})})},q=n(406);var H=function(){var e=Object(c.useState)(!0),t=Object(i.a)(e,2),n=t[0],a=t[1],l=Object(c.useState)(1629813828796),r=Object(i.a)(l,2),o=r[0],u=r[1],s=Object(c.useState)(0),d=Object(i.a)(s,2),f=d[0],j=d[1],m=Object(c.useState)(6835),v=Object(i.a)(m,2),b=v[0],p=v[1],O=Object(c.useState)(0),h=Object(i.a)(O,2),y=h[0],k=h[1],x=Object(c.useRef)();return Object(L.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[Object(L.jsx)("div",{className:"w-2/3 h-screen",children:Object(L.jsx)(U,{fileName:"20.4.csv",sec:n?f:0,sync:o,setSelectedTimestamp:k,playerRef:n&&x,setSync:u,selectedTimestamp:y,start:b})}),Object(L.jsxs)("div",{className:"w-1/3 h-screen",children:[Object(L.jsxs)("div",{className:"flex justify-center",children:[Object(L.jsx)("div",{className:"mr-2",children:"Link:"}),Object(L.jsx)(q.a,{checked:n,onChange:function(e){return a(e)}})]}),Object(L.jsx)(W,{url:"".concat("","videos/P020_10.webm"),setSec:j,setSync:u,setStart:p,selectedTimestamp:y,playerRef:x})]})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,407)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,l=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),l(e),r(e)}))};n(398);r.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(H,{})}),document.getElementById("root")),Q()}},[[399,1,2]]]);
//# sourceMappingURL=main.b3f4d477.chunk.js.map